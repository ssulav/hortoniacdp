{
  "paragraphs": [
    {
      "text": "%md\n### Objective: Implement appropriate data security controls across the enterprise\n### Purpose:\n#### -Protect sensitive data through anonymization and pseudonymization\n#### -Implement policy based controls to grant and monitor data access\n### Solutions: \n#### -Classification/Tagging of sensitive columns in Apache Atlas \n#### -Policies in Apache Ranger for:\n#####    - dynamic classification based authorization of Hive tables/columns, \n#####    - dynamic classification based masking of Hive columns, \n#####    - prohibition of toxic joins of Hive columns\n\n",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.779",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eObjective: Implement appropriate data security controls across the enterprise\u003c/h3\u003e\n\u003ch3\u003ePurpose:\u003c/h3\u003e\n\u003ch4\u003e-Protect sensitive data through anonymization and pseudonymization\u003c/h4\u003e\n\u003ch4\u003e-Implement policy based controls to grant and monitor data access\u003c/h4\u003e\n\u003ch3\u003eSolutions:\u003c/h3\u003e\n\u003ch4\u003e-Classification/Tagging of sensitive columns in Apache Atlas\u003c/h4\u003e\n\u003ch4\u003e-Policies in Apache Ranger for:\u003c/h4\u003e\n\u003ch5\u003e- dynamic classification based authorization of Hive tables/columns,\u003c/h5\u003e\n\u003ch5\u003e- dynamic classification based masking of Hive columns,\u003c/h5\u003e\n\u003ch5\u003e- prohibition of toxic joins of Hive columns\u003c/h5\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230778_-1819138183",
      "id": "20180416-122010_1467364273",
      "dateCreated": "2019-08-22 07:50:30.778",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### Dynamic classification based masking policies\n1. HR can veiw PII data unmasked\n2. Analysts see columns tagged as PII (with type attribute of MRN) as null\n3. Analysts see columns tagged as PII (with type attribute of password) as hashed value\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-tag-masking-policy.png)\n\n### Hive masking policy:\nCan do masking of specific hive columns in variety of formats:\n-redact\n-show last 4\n-show first 4\n-hash\n-nullify\n-show only year\n-custom\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-hive-masking-policy.png)\n",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.782",
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/text",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eDynamic classification based masking policies\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eHR can veiw PII data unmasked\u003c/li\u003e\n\u003cli\u003eAnalysts see columns tagged as PII (with type attribute of MRN) as null\u003c/li\u003e\n\u003cli\u003eAnalysts see columns tagged as PII (with type attribute of password) as hashed value\n\u003cbr  /\u003e\u003cimg src\u003d\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-tag-masking-policy.png\" alt\u003d\"\" /\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eHive masking policy:\u003c/h3\u003e\n\u003cp\u003eCan do masking of specific hive columns in variety of formats:\n\u003cbr  /\u003e-redact\n\u003cbr  /\u003e-show last 4\n\u003cbr  /\u003e-show first 4\n\u003cbr  /\u003e-hash\n\u003cbr  /\u003e-nullify\n\u003cbr  /\u003e-show only year\n\u003cbr  /\u003e-custom\n\u003cbr  /\u003e\u003cimg src\u003d\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-hive-masking-policy.png\" alt\u003d\"\" /\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230782_-1046938237",
      "id": "20180416-133153_2049561729",
      "dateCreated": "2019-08-22 07:50:30.782",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### Objective: Establish an Enterprise Data Catalog to define enterprise data footprint\n### Purpose: \n####  - Identify and classify sensitive data\n####  - Identify and map sources that contain personal data\n### Solution: Use Atlas to capture classifications and attributes related to sensitive and personal data\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-Atlas-tags.png)",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.782",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eObjective: Establish an Enterprise Data Catalog to define enterprise data footprint\u003c/h3\u003e\n\u003ch3\u003ePurpose:\u003c/h3\u003e\n\u003ch4\u003e- Identify and classify sensitive data\u003c/h4\u003e\n\u003ch4\u003e- Identify and map sources that contain personal data\u003c/h4\u003e\n\u003ch3\u003eSolution: Use Atlas to capture classifications and attributes related to sensitive and personal data\u003c/h3\u003e\n\u003cp\u003e\u003cimg src\u003d\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-Atlas-tags.png\" alt\u003d\"\" /\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230782_173586684",
      "id": "20180418-235332_2092468851",
      "dateCreated": "2019-08-22 07:50:30.782",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### Sample queries analyst would run",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.782",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eSample queries analyst would run\u003c/h3\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230782_1789593374",
      "id": "20180416-121930_2070802497",
      "dateCreated": "2019-08-22 07:50:30.782",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "BMI by ZipCode (US only)",
      "text": "%jdbc(hive)\nselect lpad(zipcode,5,\"0\"), avg((weight*4500/(height*height))) as bmi\nfrom hortoniabank.us_customers\ngroup by lpad(zipcode,5,\"0\") ",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:41.373",
      "config": {
        "editorSetting": {
          "editOnDblClick": false,
          "language": "sql",
          "completionSupport": true
        },
        "colWidth": 6.0,
        "editorMode": "ace/mode/sql",
        "editorHide": false,
        "fontSize": 9.0,
        "title": true,
        "results": [
          {
            "graph": {
              "mode": "multiBarChart",
              "height": 274.0,
              "optionOpen": false,
              "keys": [
                {
                  "name": "_c0",
                  "index": 0.0,
                  "aggr": "sum"
                }
              ],
              "values": [
                {
                  "name": "bmi",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "scatter": {
                "yAxis": {
                  "name": "bmi",
                  "index": 1.0,
                  "aggr": "sum"
                }
              },
              "setting": {
                "multiBarChart": {
                  "rotate": {
                    "degree": "-45"
                  },
                  "xLabelStatus": "default"
                }
              },
              "commonSetting": {}
            }
          }
        ],
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "_c0\tbmi\n01002\t22.898148125214696\n01010\t33.19050521711069\n01013\t29.1421318190166\n01028\t27.786117083857356\n01040\t27.240753070039773\n01060\t29.034538284621583\n01069\t27.22983213703566\n01071\t28.8372878700331\n01109\t30.85113426120772\n01257\t28.65234375\n01450\t19.518164327750114\n01452\t27.31259409684535\n01453\t24.808893758757154\n01463\t30.159438516775527\n01501\t25.901309748852285\n01524\t23.80385434853122\n01527\t26.15228534507743\n01570\t31.29795918367347\n01588\t31.206145314622002\n01740\t28.89339815236722\n01801\t26.21132563028205\n01824\t26.394721183223993\n01830\t31.679256889288904\n01840\t28.21019118040768\n01887\t26.126077226250043\n01901\t20.603766673788957\n01940\t28.993236212278877\n01944\t26.99521502835539\n01945\t22.846204093482363\n01950\t29.304313206049834\n01960\t28.333484868834933\n01970\t28.029336734693878\n02021\t26.90642547699553\n02043\t25.405751466768606\n02142\t28.02299653241108\n02148\t31.42062169721365\n02154\t27.689903848109182\n02174\t21.95948964538828\n02192\t27.60151584400488\n02210\t26.012305008441594\n02324\t22.793452995867767\n02330\t24.82728564049587\n02346\t27.66857142857143\n02368\t36.44287326748135\n02534\t28.80622837370242\n02540\t29.274025745692416\n02653\t30.566156647176218\n02655\t33.22879815960097\n02703\t30.821240947483624\n02760\t17.993067469626414\n02885\t34.981871596009775\n02895\t29.157661617771005\n02905\t28.020771217711136\n02910\t28.76138884396343\n02911\t31.367383796107454\n03047\t29.548828125\n03054\t27.757264103499235\n03103\t27.39643730424783\n03275\t30.922127706723195\n03301\t28.294717523481676\n03467\t28.943499615757293\n03592\t21.569444444444443\n03602\t33.327136289886425\n03755\t22.147623041786844\n03811\t27.85425273975001\n03824\t25.293891776937617\n03851\t31.991192198804654\n03878\t19.97750865051903\n03886\t26.71584452479339\n03909\t28.319632487095053\n04005\t22.486935694585572\n04011\t29.265561224678788\n04043\t25.97122024613248\n04062\t30.817040429998595\n04263\t31.108579632346057\n04280\t18.714555765595463\n04282\t29.60128159487362\n04345\t22.63719512195122\n04355\t29.765426880811496\n04358\t31.600029296555483\n04410\t19.005102040816325\n04543\t34.29551020408163\n04627\t20.52297689685646\n04634\t29.040045528840732\n04740\t26.89472840890883\n04769\t31.655287019769386\n04776\t28.56461151245268\n04937\t19.99078673289537\n04941\t29.1062543878392\n04945\t29.493149812987088\n04958\t40.60546875\n05033\t29.73663960400497\n05047\t26.407970289457452\n05250\t38.0238369857747\n05301\t28.097246997195448\n05401\t28.3554878619333\n05403\t27.6873037336691\n05404\t26.116130839224027\n05470\t24.449803119562894\n05602\t32.696423470185934\n05641\t28.681162562145914\n05676\t18.856418306967758\n05738\t28.214876033057852\n05753\t28.96696482407293\n05764\tnull\n05765\t29.525330236609086\n05767\t27.609795918367347\n05777\t28.78599088624037\n05841\t28.344238215866476\n06066\t25.603057817698136\n06082\t27.53499559312037\n06085\t29.311327522331737\n06096\t28.09311224489796\n06418\t29.04009984662315\n06424\t27.99457648949856\n06473\t30.061548050045044\n06475\t27.678658072034963\n06516\t25.90185703130861\n06702\t30.61046841395851\n06770\t26.286640484059927\n06790\t21.91894267171444\n06795\t25.541666666666668\n06840\t27.124897959183674\n06870\t20.39909230328619\n06880\t24.02752004481636\n06995\t30.925063759295554\n07010\t25.722667726687646\n07024\t28.708680891800867\n07036\t30.460050055165098\n07055\t29.670994373507163\n07065\t31.07184421656018\n07090\t30.84475564083548\n07110\t25.872022022250334\n07112\t29.858129348287783\n07305\t28.83379740070276\n07446\t27.26756169208987\n07480\t26.13236884802596\n07481\t24.876886566873697\n07501\t29.297547587450108\n07608\t27.95864762938379\n07631\t27.802358538917115\n07662\t28.534267111970863\n07716\t29.569204152249135\n07734\t20.63020408163265\n07735\t27.58778424261303\n07801\t26.14298435701369\n07860\t27.95615722331975\n07866\t23.903231915162227\n07924\t27.757469650359738\n07946\t29.569768922173164\n07974\t27.429477381498078\n08012\t20.7987898313815\n08021\t26.84347172422598\n08030\t24.906636024130997\n08033\t28.817048108733893\n08057\t35.60877501352082\n08060\t23.558682320664893\n08077\t21.85123966942149\n08102\t28.51780063904388\n08230\t31.415023316487662\n08234\t39.19229176860251\n08501\t16.809795918367346\n08502\t28.598302702316474\n08512\t30.52164761898428\n08530\t32.96207409410492\n08534\t30.53727154265094\n08537\t31.623512709572744\n08608\t23.523364206835076\n08701\t30.345615570490693\n08759\t19.224765868886575\n08809\t27.19275646056745\n08812\t19.725981558596075\n08817\t28.23790701175249\n08855\t25.721108603799653\n08863\t24.303361103131284\n08872\t26.249014697102375\n08873\t27.02204081632653\n08876\t27.75991291773659\n08882\t22.710379528788565\n08884\t27.07175598377249\n08901\t28.45795532420577\n10017\t27.854915523460647\n10031\t27.795027500119584\n10121\t37.700153776994426\n10281\t23.275862068965516\n10306\t25.29289513175307\n10312\t25.92903645529942\n10463\t28.884555718501478\n10467\t26.465709067561225\n10509\t27.963932787642978\n10538\t23.18497561463664\n10543\t27.407002157916516\n10549\t24.11025200805649\n10562\t22.433507426639295\n10570\t27.870292674580593\n10583\t28.949296230505222\n10601\t27.094453651901503\n10641\t30.73370094334348\n10707\t22.89425058932241\n10901\t28.16396215313381\n10952\t29.420878444267213\n10956\t30.015356259029808\n10992\t25.32875042540597\n11021\t28.202908587257618\n11209\t32.31232600835628\n11211\t29.6251365871426\n11213\t27.32370650361214\n11227\t28.25589851446235\n11235\t29.123230540744274\n11354\t26.753363847860967\n11361\t27.413229312791227\n11365\t23.4552460789616\n11375\t32.57197892467669\n11418\t28.16015625\n11423\t29.181031646044413\n11717\t27.518257894652123\n11729\t31.042781821407445\n11746\t31.209768152737155\n11756\t28.89937641925752\n11776\t32.687360085535765\n11779\t24.340074710786315\n11783\t38.78580300350032\n11963\t29.60330578512397\n11978\t35.044642857142854\n12022\t32.73484630853203\n12032\t34.75052052349792\n12043\t30.55107179752066\n12059\t27.305372019534616\n12068\t38.19700368530684\n12074\t36.62217534179886\n12095\t28.681245161236614\n12117\t32.77931671283472\n12167\t24.226886716872297\n12175\t17.092163165943635\n12195\t32.78204081632653\n12203\t32.92872281790748\n12206\t25.39472125119374\n12210\t29.25241866412403\n12302\t35.06132965597329\n12305\t28.229554309040093\n12452\t38.83364784438961\n12455\t30.087209302325583\n12464\t21.363261500950195\n12477\t22.20415224913495\n12501\t26.04066201149647\n12522\t24.226650803093396\n12540\t32.80278088903179\n12542\t24.700408163265305\n12701\t27.11603570329332\n12719\t18.266565885613506\n12754\t22.128560993425857\n12801\t32.25271124626089\n12812\t30.433893515764424\n12853\t33.44945905255418\n12866\t28.902185223725287\n12883\t38.063280785246874\n12901\t28.36971995776983\n12919\t23.748046875\n12956\t34.97602776162846\n12983\t29.431742586043907\n12986\t24.760841836734695\n13027\t23.465397923875432\n13039\t21.380553902174295\n13053\t33.29928437881661\n13088\t35.250789564538145\n13152\t22.796442299201995\n13157\t32.90277777777778\n13208\t25.096263098093676\n13346\t32.07493056394155\n13354\t17.19678953626635\n13367\t30.277423469387756\n13402\t40.364720678323664\n13439\tnull\n13637\t30.6521114622235\n13745\t27.967618026355062\n13753\t22.056993402775593\n13760\t30.223730217595268\n13803\t25.055555555555557\n13804\t24.63038691412394\n13827\t29.081868079103998\n14004\t18.93226865294786\n14011\t25.143634051138108\n14036\t27.680560417905973\n14068\t25.94086217899219\n14098\t34.50595924644367\n14204\t26.30251512601863\n14211\t20.774904575543076\n14214\t27.71779883373191\n14220\t26.680242572428337\n14222\t25.768184915479505\n14227\t27.173666613548928\n14304\t21.472318339100347\n14416\t21.463815789473685\n14423\t21.815427345032194\n14445\t23.998042359843826\n14608\t26.775098345752024\n14609\t38.16872427983539\n14611\t26.245306931311642\n14614\t28.82741280170915\n14616\tnull\n14620\t29.63208771566458\n14712\t21.91894267171444\n14739\t28.575348657024794\n14781\t28.382203512846566\n14810\t34.933035714285715\n14858\t22.161989795918366\n14891\t22.918427726120033\n14893\t37.56858710562414\n14901\t29.882615505877922\n15001\t30.093607691010288\n15012\t23.207075962539022\n15106\t26.955282852037726\n15108\t23.916347986381748\n15139\t21.39290435587283\n15143\t26.748065428795567\n15201\t26.25795331827898\n15202\t26.368343195266274\n15209\t27.351983473967998\n15215\t27.831450653983353\n15219\t28.26193807153744\n15236\t30.783961185553395\n15323\t22.922863710113575\n15340\t31.666974263845553\n15473\t33.096774193548384\n15501\t28.3869319967529\n15666\t31.434756623945816\n15701\t29.81352673300725\n15728\t35.322818114123635\n15778\t23.61160946639252\n15901\t28.735321035996876\n15931\t34.4250622997508\n15936\t26.53739377952203\n15963\t22.17183169564122\n16038\t26.658090814928663\n16061\t26.576735368546817\n16214\t33.31613841403567\n16323\t25.295888655422846\n16335\t34.24697853008011\n16364\t26.515851031086488\n16401\t31.266617969320674\n16412\t22.68140243066157\n16417\t20.59722222222222\n16501\t27.589070079629792\n16510\t26.75054007785807\n16630\t32.2384066587396\n16651\t18.415178571428573\n16674\t22.496326530612244\n16746\t36.24828532235939\n16801\t27.86516409085422\n16870\t24.102717808886638\n16923\t36.33401920438958\n17003\t26.651091253083564\n17042\t30.79171290711468\n17044\t23.73113854595336\n17045\t27.10546875\n17051\t34.03346386614454\n17061\t28.505273120605732\n17066\t32.51814028486966\n17067\t21.44768133174792\n17086\t25.106641728261522\n17111\t28.455365974162184\n17113\t35.502298539751216\n17240\t26.744738144352233\n17264\t24.840561224489797\n17325\t24.93923189110355\n17339\t20.778123309897243\n17350\t34.09315971609783\n17402\t30.772849588503362\n17404\t32.11953049224732\n17520\t24.451772900178742\n17522\t23.998925020155873\n17701\t25.119784065656656\n17731\t22.14876033057851\n17771\t39.76171875\n17801\t22.158576721638806\n17872\t34.52381488189326\n17922\t36.108534322820034\n17948\t21.253035961453083\n18014\t23.123966942148762\n18049\t24.873003423180155\n18106\t31.50543196631812\n18344\t30.043704474505724\n18353\t33.52627376977791\n18431\t21.976406468500127\n18447\t23.075360479748998\n18603\t31.482555477549525\n18634\t28.69864981327205\n18640\t26.60128008857566\n18641\t28.022274411977126\n18701\t23.76855151221102\n18705\t29.792099092283298\n18721\t25.17073264434588\n18813\t30.830449826989618\n18833\t28.279037689155746\n18834\t27.20242214532872\n18847\t24.830900676397295\n18940\t24.660066329858626\n18949\t25.980873671264476\n18964\t27.246797075880917\n18974\t28.380111600088398\n19003\tnull\n19010\t24.925909160049656\n19050\t26.895244753951687\n19064\t30.682691077413836\n19088\t26.563696075184865\n19107\t28.21168520336462\n19143\t23.363980530016224\n19154\t18.956350386674597\n19341\t27.116586769046734\n19365\t32.458358120166565\n19406\t28.567047637251587\n19464\t31.77301096552799\n19473\t25.877414467870217\n19501\t19.583102493074794\n19601\t30.59352091787133\n19714\t27.773477956021736\n19947\t28.361937211056926\n19971\t20.889698231009366\n20002\t29.33456632537667\n20011\t26.099217957668284\n20020\t21.514331781175258\n20027\t25.090537487898455\n20166\t26.562125363200852\n20175\t30.817657486182743\n20659\t21.783737024221452\n20670\t20.627011001872827\n20678\t18.94249192141611\n20705\t28.370246220285726\n20735\t27.4436045605739\n20763\t30.126723621127432\n20767\t26.0198937781366\n20783\t28.22120314895127\n20815\t25.552539956003518\n20850\t28.139443538590605\n20872\t30.20020008622214\n20877\t25.23848252515607\n20901\t34.57116632326601\n20904\t27.795238036821114\n20910\t29.754083106030937\n21030\t26.439195241308894\n21040\t26.532207171299643\n21045\t29.495581921394034\n21078\t33.57093425605537\n21090\t28.09010448991991\n21108\t30.657563413432598\n21117\t25.08826314544257\n21158\t31.074617346938776\n21206\t32.33716065456359\n21208\t28.88999827024306\n21223\t26.588609791885357\n21227\t25.879431137764257\n21231\t26.57814758867487\n21234\t24.184071099967255\n21236\t26.259832617235503\n21502\t26.98221828384559\n21651\t28.763971071663377\n21668\t26.09045575053655\n21740\t27.13127537560289\n21742\t29.745807528361656\n21804\t29.0005035159566\n21824\t29.28892733564014\n21904\t41.99063923089897\n21915\t21.219240129799893\n21921\t26.353037805912738\n22001\t31.272727272727273\n22030\t28.914101215181404\n22041\t32.71453287197232\n22075\t28.904079826650054\n22080\t28.167453121542763\n22101\t26.544035869062505\n22117\t36.24260355029586\n22182\t22.55855186021905\n22193\t33.94086442074334\n22201\t26.857566641929917\n22204\t34.95448704981301\n22303\t28.84722222222222\n22408\t25.700871989034752\n22471\t22.925230963200868\n22653\t39.02627213456271\n22701\t28.013311539430035\n22735\t31.625\n23040\t23.261834319526628\n23047\t28.238131616077098\n23224\t26.814940678126007\n23234\t21.071020408163264\n23322\t31.094445973651688\n23324\t28.416738675981357\n23417\t28.27783558792924\n23503\t18.982937028784225\n23508\tnull\n23513\t37.522768732272596\n23607\t26.881048343153566\n23827\t19.510884170921795\n23851\t27.780031834212416\n23860\t27.483067424125903\n23868\t33.757564969740116\n23883\t24.34722222222222\n23901\t23.445833282272687\n24078\t20.14876033057851\n24273\t29.404968538797295\n24281\t30.400431290898275\n24282\t18.002676977989292\n24317\t33.68579531529008\n24319\t32.818930041152264\n24343\t31.276517810811637\n24413\t22.027130876407497\n24416\t29.094746173516352\n24450\t28.844701123052772\n24469\t28.83991346673878\n24501\t24.318408645288248\n24538\t31.62162162162162\n24540\t35.44508337555404\n24553\t31.833333333333332\n24824\t20.927467300832344\n24874\t35.402754193454236\n25670\t23.791392278642988\n25705\t26.657735020661157\n26032\t18.63073506718356\n26041\t23.638042474607573\n26143\t22.201619485524716\n26222\t22.909672004132233\n26241\t30.952047034880433\n26261\t20.72013540612344\n26280\t19.884297520661157\n26554\t29.32224246474537\n26589\t33.33572376205672\n26757\t33.62068965517241\n27041\t25.855187143307308\n27055\t25.57276677801539\n27213\t23.78338614757809\n27215\t27.421778380099642\n27249\t33.07755745993044\n27252\t27.383401920438956\n27302\t18.60410914697551\n27374\t29.86810872933347\n27513\t27.649748459770937\n27522\t23.36377996229533\n27525\t28.72446939301907\n27587\t23.297440229923737\n27616\t29.266326256382694\n27806\t31.178824253616497\n27820\t37.254942767950055\n27824\t27.15167969999144\n27834\t28.514040219310292\n27892\t28.98012639915233\n27923\t35.236111111111114\n27925\t31.110726643598618\n27948\t30.72896810764256\n27982\t27.908622441573524\n28001\t28.626184431180945\n28009\t34.938339359504134\n28036\t32.92988731210624\n28043\t27.26580230581527\n28086\t29.651538986892586\n28092\t32.13157138753232\n28206\t26.016162176351422\n28209\t29.51703431466403\n28307\t28.309061062917554\n28314\t29.549972333608274\n28365\t27.421019693657264\n28383\t43.57037742382271\n28425\t37.007414656178256\n28441\t23.73611111111111\n28511\t25.22793140925009\n28513\t28.400869341416684\n28515\t33.33040148282856\n28551\t18.444427716511726\n28594\t25.39832568187956\n28604\t39.65710623297549\n28609\t29.580132831547484\n28628\t22.485577363328346\n28655\t26.327355234833327\n28659\t28.587649208656664\n28676\t22.29438745141977\n28704\t28.97002551020408\n28705\t28.86589617768595\n28734\t26.524616068431044\n28777\t25.454174895616337\n28779\t31.760039444308248\n28803\t28.61761186112942\n29009\t31.89802289281998\n29010\t28.88241415192508\n29078\t26.125714285714285\n29104\t17.506377551020407\n29115\t25.521825391863473\n29125\t23.422591566635887\n29135\t23.846436566540813\n29209\t35.570247933884296\n29401\t22.16735620556046\n29432\t35.392011834319526\n29525\t23.241727104064765\n29532\t20.14453125\n29582\t24.951415079703263\n29611\t31.74643633827837\n29621\t28.66836203527877\n29650\t25.824584641548928\n29651\t40.21436004162331\n29655\t19.363074442354208\n29720\t29.814236524023812\n29728\t39.54248366013072\n29730\t25.133962221956153\n29910\t27.851869054481273\n29924\t26.859861591695502\n30021\t27.261983786594122\n30050\t25.15220598880194\n30075\t27.45981384150963\n30076\t25.989895289519723\n30092\t27.675002855404045\n30093\t27.393517119018888\n30101\t33.46017786748127\n30107\t33.82909680908599\n30117\t22.86249447469436\n30134\t28.56457270979569\n30139\t23.53122170601811\n30151\t25.287689630963644\n30161\t25.694819694771557\n30188\t33.41339024378758\n30207\t26.88958113218958\n30209\t28.907056228461357\n30214\t22.13387573964497\n30236\t31.21729076432707\n30253\t38.251355920384576\n30269\t30.009483543246898\n30276\t32.06611570247934\n30303\t27.94068574464933\n30305\t27.778292266865567\n30309\t26.292828581241444\n30310\t23.96512962621118\n30312\t31.079453498438028\n30315\t25.43266630611141\n30331\t28.335182309265537\n30338\t26.933760079720965\n30339\t26.326578411918245\n30340\t27.427685950413224\n30345\t28.46108245176432\n30354\t29.778881589488865\n30401\t31.38750734135929\n30415\t29.07720462288401\n30471\t23.96105991609595\n30513\t30.170478173798923\n30517\t27.494640096705844\n30529\t31.29196797520661\n30537\t25.43266630611141\n30567\t33.09006763972944\n30642\t22.241445597846983\n30650\t26.462042006903925\n30653\t25.801038062283737\n30833\t29.14878892733564\n30907\t26.235894484025646\n31008\t20.410801493823612\n31015\t20.253124605479105\n31029\t26.10158628424932\n31042\t37.3665306122449\n31052\t23.73321432918171\n31078\t23.043010517877487\n31204\t31.686851211072664\n31213\t27.357134641666363\n31303\t32.89800777283708\n31305\t36.06505102040816\n31308\t22.12107419208011\n31321\t37.42911153119093\n31408\t39.638671875\n31501\t28.784784462445096\n31542\t30.773166978800248\n31601\t28.36545027548243\n31650\t19.42627824019025\n31707\t27.81228785749271\n31709\t32.9419115559527\n31729\t31.270282923128295\n31750\t22.5653547831083\n31770\t36.62053056516724\n31774\t31.68435640886966\n31794\t25.110032539287786\n31833\t28.042769404112075\n31907\t27.14015847981493\n32008\t17.96422272612749\n32025\t26.94058256228097\n32037\t27.373756889356947\n32053\t24.263856307552256\n32064\t29.35559974435982\n32073\t32.31995272305517\n32077\t27.35642772421487\n32084\t23.278670160739093\n32091\t25.222637173226083\n32117\t24.656602521248377\n32129\t22.983707409410492\n32177\t21.053875236294896\n32205\t24.741963889112014\n32207\t29.455484453045493\n32216\t27.169388866721523\n32218\t23.584990160904976\n32312\t19.293061224489797\n32332\t24.748635449583453\n32340\t22.77548565149232\n32347\t29.079900407424173\n32355\t20.939392878400618\n32401\t29.669755014757754\n32405\t32.6006831242847\n32428\t18.205714285714286\n32448\t33.875171238598014\n32455\t28.482257108080272\n32456\t28.536470014657635\n32460\t34.09424517294592\n32505\t33.08266950791958\n32507\t26.198258452254787\n32561\t32.0593665153418\n32565\t36.70360110803324\n32569\t36.88754325259516\n32570\t22.155917096547725\n32580\t25.554569653948537\n32601\t27.69399157543447\n32641\t24.481970113400276\n32643\t23.505336432699867\n32698\t35.56240811789594\n32713\t28.999372256115514\n32746\t23.0235109672992\n32771\t28.638168669788097\n32807\t34.042159763313606\n32808\t26.084842966477954\n32903\t30.441337438467805\n32905\t32.14836666323866\n33014\t21.529701446598953\n33042\t21.11949248832218\n33054\t22.453233555974585\n33062\t30.255089818299158\n33132\t27.876770857304507\n33135\t23.361328125\n33143\t20.07964957327856\n33156\t26.31340033861341\n33161\t26.5130722546968\n33176\t27.20580774160129\n33409\t29.59872393732595\n33417\t25.9952050550001\n33432\t29.57508288098848\n33442\t26.14489825621875\n33478\t27.611966343881583\n33486\t27.23514245065641\n33576\t35.072301390007354\n33602\t28.43075387731472\n33607\t28.85230994640951\n33610\t28.50204874493429\n33710\t28.064023741583004\n33821\t27.877272078315304\n33850\t30.960050418402716\n33868\t29.470088288104396\n33872\t19.79117438563327\n33901\t28.394616823695696\n33905\t29.989782455165297\n33912\t27.71281812256059\n33917\t25.032933117543003\n33936\t35.64098607306817\n33952\t28.47112859468355\n33957\t29.4465306122449\n33999\t26.79438443298581\n34234\t29.7421875\n34240\t27.748774938834842\n34420\t22.92901778561128\n34429\t25.743652837588748\n34472\t26.313625346260388\n34474\t27.980015243711026\n34488\t33.064007069814416\n34620\t29.582729667137784\n34624\t27.103910271510227\n34669\t24.44643964099285\n35073\t34.06611570247934\n35111\tnull\n35160\t31.80986634651923\n35180\t30.768291566191508\n35214\t30.768166089965398\n35221\t27.38762101838705\n35244\t31.13835956622853\n35291\t26.452676455047264\n35401\t28.73169538193436\n35553\t19.96694214876033\n35555\t30.136656858306925\n35660\t28.870413950079087\n35748\t17.546826222684704\n35801\t28.33904337497308\n35950\t26.084680337082947\n35957\t27.680555555555557\n36049\t28.316881985774423\n36054\t28.3579604578564\n36107\t29.664574905086564\n36117\t25.643208411026432\n36401\t24.796713850495976\n36426\t27.415727782038232\n36474\t32.29279340183883\n36480\t25.924744897959183\n36518\t26.90164015381179\n36575\t28.49528902802106\n36582\t27.994311809004966\n36607\t32.9571982203907\n36608\t30.31083364141773\n36610\t25.35625693744893\n36767\t29.39868765463086\n36853\t28.04188433524984\n36854\t23.382138465498013\n36867\t33.297326492033484\n37060\t24.269638616637504\n37062\t26.107279156892265\n37067\t28.393584421470774\n37098\t40.03626243885984\n37115\t27.79132197662075\n37142\t19.148400100781053\n37166\t30.417179334799492\n37172\t30.341198979591837\n37184\t28.141275413757185\n37203\t25.13472495677964\n37204\t28.139653930330976\n37206\t29.098332089309483\n37207\t30.03489217208127\n37209\t29.798065108237168\n37211\t29.26333120708993\n37347\t27.170502690426652\n37349\t20.267578125\n37381\t19.33352484918127\n37415\t19.233389508408333\n37421\t27.90340667534439\n37650\t27.17900550892907\n37656\t18.402716991701972\n37725\t25.559179904298734\n37737\t31.123966942148762\n37743\t36.29752066115702\n37821\t24.900574883587353\n37826\t30.64351422696059\n37828\t27.204788816180844\n37849\t24.029219530949636\n37854\t23.8481121589157\n37874\t33.251412002762976\n38017\t30.88071567928206\n38018\t35.55082991456209\n38041\t28.823381204333586\n38058\tnull\n38080\t32.724694513497425\n38110\t26.461072493067512\n38115\t28.88814623264115\n38118\t28.057687862860792\n38134\t27.527580047492542\n38220\t25.457896282862958\n38225\t27.950423952290155\n38237\t30.975590816182248\n38340\t28.261245674740483\n38354\t22.07617728531856\n38358\t34.44536940686785\n38359\t27.682463787697216\n38375\t27.37476980769702\n38451\t21.84746034289377\n38614\t36.44848581958019\n38652\t21.694444444444443\n38663\t22.294655019727028\n38668\t27.03090980269357\n38740\t29.605065321260316\n38744\t33.69219848566793\n38761\t24.34722222222222\n38771\t37.32461734693877\n38824\t28.189819595100367\n38903\t25.912661639274692\n38930\t28.992559868814006\n38967\t27.698060941828256\n39038\t29.341873985938346\n39119\t30.144032921810698\n39159\t20.513401203824785\n39168\t23.28235226900147\n39194\t20.774287801314827\n39201\t28.112466186878923\n39208\t27.4234693877551\n39209\t22.666468489892985\n39212\t32.112562488877224\n39213\t26.610077724883922\n39332\t17.097079502433747\n39338\t24.489421165382993\n39339\t20.933948863636363\n39402\t28.358439627091347\n39474\t32.86649627113896\n39507\t28.872617965537774\n39531\t26.90308313750107\n39601\t27.692225215847174\n39631\t31.6239938876317\n39652\t24.252397340372216\n39736\t33.382889834017085\n39773\t30.25518153125401\n40027\t19.47311578295621\n40070\t26.074711556281407\n40204\t28.77657455754482\n40211\t30.653675179842768\n40272\t27.140202149737526\n40324\t34.795356824711554\n40336\t21.041015625\n40342\t23.35616696149648\n40372\t32.80764475926359\n40379\t37.81818181818182\n40383\t32.585548397052584\n40507\t27.65906808961239\n40517\t24.17365676447495\n40593\t22.577957107144424\n41035\t30.177906111188904\n41041\t32.06503191410862\n41042\t26.0686354238936\n41051\t24.318130375735628\n41091\t20.047998918334233\n41124\t28.474851270957274\n41129\t24.974893667296787\n41169\t31.93388429752066\n41501\t30.266872069908324\n41635\t27.9953085944554\n41739\t27.33656509695291\n41743\t22.041420118343197\n41749\t17.744269848771268\n42001\t27.491366734251947\n42003\t28.23484125905533\n42023\t31.69296928881496\n42049\t25.965048674959437\n42064\t19.82562401141931\n42071\t28.749254635557367\n42129\t24.474011065527495\n42134\t35.7373462239455\n42164\t27.937691836090792\n42167\t20.90909090909091\n42223\t23.718164951931186\n42261\t36.814128943758575\n42270\t33.635355029585796\n42276\t32.27664380083974\n42404\t32.40957949651623\n42409\t22.24281349026709\n42519\t22.510868252626494\n42701\t29.662752448982314\n42718\tnull\n43017\t28.26907794811016\n43026\t22.165834744295534\n43036\t42.04430200008114\n43054\t27.493695949846988\n43074\t35.10310864881502\n43078\t29.063857867718657\n43115\t29.916666666666668\n43135\t32.158307963467394\n43164\t31.562669010275826\n43201\t27.779157854071425\n43219\t30.136961583865826\n43314\t27.694769987089142\n43344\t28.652971521015843\n43512\t30.44527653783406\n43537\t27.854649612008053\n43547\t28.961555621653776\n43701\t31.534001297519332\n43713\t34.00091033227128\n43724\t33.46619897959184\n43725\t28.93733128413639\n43730\t27.746405787369127\n43812\t30.603445734693253\n43832\t26.560536680848923\n43844\t23.45679012345679\n43908\t35.228332235336154\n43913\t21.848965331900025\n43915\t29.605055845383564\n43917\t34.651404786680544\n43920\t23.262975778546714\n43938\t43.73150887573964\n44035\t29.099264070229083\n44039\t35.69376291322314\n44053\t28.58132774472688\n44065\t28.83964296706679\n44067\t32.128440341164826\n44070\t23.29580098666648\n44074\t28.58489980819123\n44080\t27.63786804962108\n44087\t26.838967888901575\n44109\t30.088733265899133\n44111\t28.052949946824555\n44114\t26.632439982678708\n44116\t24.658787880009527\n44128\t29.221447135788267\n44129\t24.477703465189965\n44136\t30.19488441370419\n44212\t33.68278827623617\n44232\t19.459285022768835\n44276\t27.68384213189408\n44311\t30.496393654961093\n44428\t25.906065088757398\n44484\t21.190828402366865\n44505\t30.754907100123646\n44512\t25.748324243819503\n44514\t29.38957475994513\n44612\t22.831632653061224\n44620\t22.31252367125363\n44645\t26.25638269282451\n44651\t32.2318339100346\n44663\t27.492187311585944\n44669\t24.245434623813\n44702\t27.781920631334625\n44807\t21.536351165980797\n44824\t27.780084729340153\n44842\t26.782006920415224\n44870\t32.13526522011561\n44874\t32.41884515943694\n45036\t23.964725248997535\n45044\t26.930462779801402\n45101\t30.708984375\n45229\t28.229512405300017\n45231\t21.643598615916954\n45245\t30.72708403284393\n"
          },
          {
            "type": "HTML",
            "data": "\u003cdiv class\u003d\"result-alert alert-warning\" role\u003d\"alert\"\u003e\u003cbutton type\u003d\"button\" class\u003d\"close\" data-dismiss\u003d\"alert\" aria-label\u003d\"Close\"\u003e\u003cspan aria-hidden\u003d\"true\"\u003e\u0026times;\u003c/span\u003e\u003c/button\u003e\u003cstrong\u003eOutput is truncated\u003c/strong\u003e to 1000 rows. Learn more about \u003cstrong\u003ecommon.max_count\u003c/strong\u003e\u003c/div\u003e"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230782_-1501769532",
      "id": "20160925-071150_859801425",
      "dateCreated": "2019-08-22 07:50:30.782",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Top 5 Report - States by BMI (US Only)",
      "text": "%jdbc(hive)\nselect * from\n(select state, avg((weight*4500/(height*height))) as bmi\nfrom hortoniabank.us_customers\ngroup by state) s \norder by bmi desc\nlimit 5",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.783",
      "config": {
        "editorSetting": {
          "editOnDblClick": false,
          "language": "sql",
          "completionSupport": true
        },
        "colWidth": 6.0,
        "editorMode": "ace/mode/sql",
        "editorHide": false,
        "fontSize": 9.0,
        "title": true,
        "results": [
          {
            "graph": {
              "mode": "table",
              "height": 277.0,
              "optionOpen": false,
              "keys": [
                {
                  "name": "s.state",
                  "index": 0.0,
                  "aggr": "sum"
                }
              ],
              "values": [
                {
                  "name": "s.bmi",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "scatter": {
                "xAxis": {
                  "name": "s.state",
                  "index": 0.0,
                  "aggr": "sum"
                },
                "yAxis": {
                  "name": "s.bmi",
                  "index": 1.0,
                  "aggr": "sum"
                }
              },
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "s.state": "string",
                      "s.bmi": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        ],
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "s.state\ts.bmi\nSD\t28.486996100969215\nRI\t28.439102071775036\nIA\t28.36243225893233\nMP\t28.35098277547388\nAK\t28.33652811183552\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230783_125523707",
      "id": "20160925-071159_1808389414",
      "dateCreated": "2019-08-22 07:50:30.783",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Dynamic Column Masking: MRN/password cols masked via classification policy. Others masked via Hive col policy. Custom masks for Birthday/Age.",
      "text": "%jdbc(hive)\nSELECT surname, streetaddress, country, age, password, nationalid, ccnumber, mrn, birthday FROM hortoniabank.us_customers LIMIT 50",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.783",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "editorMode": "ace/mode/sql",
        "colWidth": 12.0,
        "editorHide": false,
        "fontSize": 9.0,
        "title": true,
        "results": [
          {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "keys": [
                {
                  "name": "surname",
                  "index": 0.0,
                  "aggr": "sum"
                }
              ],
              "values": [
                {
                  "name": "streetaddress",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "scatter": {
                "xAxis": {
                  "name": "surname",
                  "index": 0.0,
                  "aggr": "sum"
                },
                "yAxis": {
                  "name": "streetaddress",
                  "index": 1.0,
                  "aggr": "sum"
                }
              },
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "surname": "string",
                      "streetaddress": "string",
                      "country": "string",
                      "age": "string",
                      "password": "string",
                      "nationalid": "string",
                      "ccnumber": "string",
                      "mrn": "string",
                      "birthday": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        ],
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "surname\tstreetaddress\tcountry\tage\tpassword\tnationalid\tccnumber\tmrn\tbirthday\nPowers\tnnnn Xxxxxxxx Xxxxx\tUS\t62\t76a3fe33eb676cb12b99f00400772e7f5e5abc00950f432a7428d8e3567e26cf\txxx-xx-3016\t5.49xxxx+xx\tnull\t01-01-1973\nWhitman\tnnnn Xxxxxxx Xxxxx\tUS\t58\t6103bc600fc877e5cdf250521e422fc738544bff75165f335e5d2437e6793f4f\txxx-xx-8255\t4.55xxxx+xx\tnull\t01-01-1977\nMarone\tnnn Xxxxx Xxxxx\tUS\t43\tda01407d5922624b1dd67c22e849cb9ee0ba0fbf3b25ab6e3f78ed234a86b817\txxx-xx-6142\t4.53xxxx+xx\tnull\t01-01-1977\nHarp\tnnnn Xxx Xxxx Xxxx\tUS\t38\t717051c13b6bda179f3f1fca42d415524c7e373dcfefc265c0973badf28b1600\txxx-xx-4018\t5.20xxxx+xx\tnull\t01-01-1997\nPereira\tnnnn Xxxxxxxx Xxxxxx\tUS\t80\t47d2ebe1a1c1146698e22d126282356ac2ccbe0ca60a9d4d6d4f757cde627e30\txxx-xx-1927\t5.38xxxx+xx\tnull\t01-01-2038\nBlackburn\tnnn Xxxxxxx Xxxx\tUS\t53\t127473e0e3d200b19f7f9fe20facdc159eccdb67433b8ec271a62cca4445a7d7\txxx-xx-7903\t5.53xxxx+xx\tnull\t01-01-1965\nGonzalez\tnnnn Xxxxx Xxxx\tUS\t41\t4082d6873762eaf3b566cae982b973ff064248b4d1eaf554aa1651ae49895bc3\txxx-xx-2582\t4.71xxxx+xx\tnull\t01-01-1995\nHelton\tnnnn Xxxxxxx Xxxxx\tUS\t49\t5a5e10b606eb7599b8175a13289663cda1bbfb17edf44e97a3044b5f89038c03\txxx-xx-4291\t5.25xxxx+xx\tnull\t01-01-1975\nMei\tnnn Xxxxx Xxxxxx\tUS\t95\t79027eba8d2ae53c943d26c0ba801ae021aec73e46d9463ab5b6700d22d59b60\txxx-xx-8366\t5.20xxxx+xx\tnull\t01-01-1941\nGoldberg\tnnnn Xxxxx Xxxxx\tUS\t81\t478f719c117d97df442ec619f535f7a7e1454c58315f70b4402d618dbc146ac6\txxx-xx-4937\t4.55xxxx+xx\tnull\t01-01-1944\nWinkler\tnnnn Xxxxx Xxxx\tUS\t46\t5dfa9db09186e767a2e6c63bfbb3136e14e59212357e98c634156e46c4f5c6de\txxx-xx-3193\t5.43xxxx+xx\tnull\t01-01-1976\nThompson\tnnnn Xxxxx Xxxx Xxxxx\tUS\t79\t2fcbf7698869f199622f80c0440c94e770b1b846f9c95431af6ea1ed9b9a91e5\txxx-xx-5747\t4.55xxxx+xx\tnull\t01-01-1956\nAnderson\tnnnn Xxxxxxxxx Xxxxx\tUS\t48\t1956925afde71a890a4df019b980e975f6a8e417342967d2225c98277dac62a2\txxx-xx-0336\t5.58xxxx+xx\tnull\t01-01-1974\nMejia\tnnnn Xxx Xxxx\tUS\t57\t6f90e556636a22a8a484ff498004af2d7a2aa69e9d661b6b59f4359973ab93b3\txxx-xx-0064\t5.35xxxx+xx\tnull\t01-01-1961\nNoland\tnnnn Xxxxxx Xxxxxx\tUS\t37\tcfa7cce9b7b32a45de22e76ae382918925dc50a55bf79a211b9845c13c5c9113\txxx-xx-3798\t4.48xxx+xx\tnull\t01-01-1988\nHaynes\tnnnn Xxxxxxxxxx Xxxxx Xxxxxx\tUS\t31\t65a99668f810afc6698d35ba4c531e8591bd3ba6bc0099ed664bc9106aeb535d\txxx-xx-8147\t4.91xxx+xx\tnull\t01-01-1996\nDion\tnnnn Xxxxxx Xxxx\tUS\t62\t26400bfde5875f9ced4c84284d92601f24739c57cc834356967505c625b0a76f\txxx-xx-2587\t5.53xxxx+xx\tnull\t01-01-1971\nButler\tnnnn Xxxxx Xxxxxx\tUS\t50\t8f8e13932e829d86aec0051912a3035e802abfc3b4c41db0b771f590b944f726\txxx-xx-6719\t4.48xxxx+xx\tnull\t01-01-1977\nBigelow\tnnnn Xxxx Xxxxxx Xxxx\tUS\t51\tfea59a46dbe83781e313ecb837bd33858d81a33f55b4c87f9a7bb41c90de9a2d\txxx-xx-9172\t4.53xxxx+xx\tnull\t01-01-1970\nWalsh\tnnnn Xxxxx Xxxxx Xxxxx\tUS\t55\t96736a02052ee964a0238386f9a514fb69e8a7edd1705f0e2aab49f271a31033\txxx-xx-3610\t4.55xxx+xx\tnull\t01-01-1965\nSheets\tnnnn Xxxxxx Xxxxxx\tUS\t35\t31e7d947d7ff06228e379d0d0021aecf81881ad377ffdde7f5d73acd2962ef9d\txxx-xx-5026\t4.91xxxx+xx\tnull\t01-01-1997\nParks\tnnnn Xxxxx Xxxxxx\tUS\t82\t2795821286f1854f8e2c24a81c578c800419992474000a92030f092d2b33be23\txxx-xx-2077\t4.53xxxx+xx\tnull\t01-01-1940\nHelm\tnnnn Xxxxxxxx Xxx\tUS\t49\te528e36f31dc340769b73f6379646c5d76200651c59162cc1e537b516e5d63fc\txxx-xx-1168\t5.22xxxx+xx\tnull\t01-01-1966\nBrinegar\tnnnn Xxxxxxxxx Xxxxx\tUS\t30\te31baf36ea4d91b973a863593574e4e0a7a7adadb889e63edd2ac61727f3d4d4\txxx-xx-7445\t4.53xxxx+xx\tnull\t01-01-1994\nMcKinney\tnnnn Xxxxxxxxx Xxxxx\tUS\t66\tf4dfed8c41f5640f9ec0264e2dd46c826f03303382235d08014ee53a6d89c2b5\txxx-xx-9133\t5.59xxxx+xx\tnull\t01-01-1955\nBoehm\tnnnn Xxxxxx Xxxxxxx\tUS\t20\t3c2fd553dec4fa710e1b445a220dc76b47dcc18f77cf9a599dcabc2207d40cb4\txxx-xx-4169\t4.53xxxx+xx\tnull\t01-01-1997\nBaker\tnnnn Xxxxxxx Xxxxxx\tUS\t88\t762f655168838ae69adf4b471a1823b100c11e082061e2db2d3c8bf53dce4aa1\txxx-xx-1699\t5.57xxxx+xx\tnull\t01-01-1941\nSmith\tnnnn Xxxxxxxxxx Xxxx\tUS\t35\t2ead0d5117881b5094eab4e5ca286de9639d759e04ce8f5be872776df068c277\txxx-xx-3370\t5.11xxxx+xx\tnull\t01-01-1993\nDunton\tnnnn Xxxxxxxx Xxxxxx\tUS\t38\tb22d91263d20b0bf3b3ebc8babd541a210f528edf42eb99f326e3b38872b8bec\txxx-xx-9390\t4.53xxxx+xx\tnull\t01-01-1985\nWiley\tnnnn Xxxxxx Xxxxxx\tUS\t40\t1a0c997b2d497b6554f8c81ad58dde74f50f74c98f4a5201ef6f3a385fbb8a80\txxx-xx-3457\t5.41xxxx+xx\tnull\t01-01-1984\nWeatherholt\tnnnn Xxxxxxx Xxxxx\tUS\t19\ta7b6e81cea36db77f93deff33c614028fc63fa9b04fd9b21082644e6324edbfe\txxx-xx-1830\t4.48xxxx+xx\tnull\t01-01-1997\nJohnson\tnnnn Xxxx Xxx Xxxxx\tUS\t39\t22e86de151c60a38296d868e00a6fb9e298eabca8494357d9d3b06da7abcbc32\txxx-xx-5368\t5.18xxxx+xx\tnull\t01-01-1979\nKilgore\tnnnn Xxxxxxxxx Xxxxxx\tUS\t85\t36ccbc0e704f7c1253a914ed8baf6b6b7526ea0dfc18199a62e3d02c27448361\txxx-xx-6347\t4.48xxxx+xx\tnull\t01-01-2032\nMorgan\tnnnn Xxxxxxx Xxxx\tUS\t70\tc33cacde1277ab8851d23057b89ba3c46ffcad46a65323915004e6b1369191b0\txxx-xx-9265\t5.39xxxx+xx\tnull\t01-01-1958\nSmith\tnnn Xxxxxx Xxxxxx\tUS\t73\t5557e6078cc3d690d71da518d77f09519ed36b819fefbc1a9d9421f04df6d08a\txxx-xx-0793\t4.53xxxx+xx\tnull\t01-01-1945\nHarrison\tnnn Xxx Xxx\tUS\t55\tf75ca5486af8585a131fccf1a90ac6c52bb14e54576ba263698d0a1e79deae0e\txxx-xx-9518\t5.51xxxx+xx\tnull\t01-01-1968\nHall\tnnn Xxxxxx Xxxxxx\tUS\t33\t7020d631706397319c6f3412a3ed9df80a4b38bb2fe80a0dbde61b370d669040\txxx-xx-7908\t4.48xxxx+xx\tnull\t01-01-1989\nMunz\tnnnn Xxxxxxx Xxxxxx\tUS\t55\tbd0285f48c03e1f0c447e7a36963da1c7e228eaf4effa3159ffb0c6d934daecc\txxx-xx-4274\t5.33xxxx+xx\tnull\t01-01-1971\nMcNulty\tnnnn Xxxxxxxx Xxxx\tUS\t32\t724f1774f69978929883d1874e9712f2f5d9410c3cb5fd8ce735b5b5c8f772b6\txxx-xx-9733\t5.40xxxx+xx\tnull\t01-01-1989\nGriffith\tnnnn Xxxxxxxx Xxxxxx\tUS\t62\t08e9f45f7a8afd938fe7596e923f692a86d5feaccd21291d1114cd229ab20fbf\txxx-xx-4328\t5.47xxxx+xx\tnull\t01-01-1974\nHarris\tnnnn Xxxxxxx Xxxxxx\tUS\t82\t6fb058ffb311eb52392e15cb564fabee0dd80036f18ed225e2d250d447598ea2\txxx-xx-2228\t4.48xxxx+xx\tnull\t01-01-1939\nBaker\tnnn Xxxxxxxx Xxxxxx\tUS\t66\t5254702a4c903ab3aede64ab561cf4393590e12aab93e936b7016be8ed45cddd\txxx-xx-3961\t5.36xxxx+xx\tnull\t01-01-1955\nClark\tnnnn Xxxxx Xxx Xxxxx\tUS\t61\t6c008fcfff0dd7adb2af605c3f6ab1dc6034a4522551c958d59bffba34ba4acb\txxx-xx-8413\t5.23xxxx+xx\tnull\t01-01-1974\nHammonds\tnnnn Xxxxxx Xxxxxx\tUS\t87\tfd46c5b0d92d686b54cbbce3384e44bf410906992ce124c6467be96153be278e\txxx-xx-1898\t4.53xxxx+xx\tnull\t01-01-1943\nCruz\tnnn Xxxxxx Xxxx\tUS\t61\te3a032e9a9259c276e0cb824cc96c85959b0f81416fbf0606bd7947e0eccddab\txxx-xx-3563\t4.55xxx+xx\tnull\t01-01-1967\nLawrence\tnnnn Xxxxxxxxxxx Xxxx\tUS\t65\t40edbb47e0b77f48aa4fe1a909388667b5a724e14535ee7263ae350a5c30492a\txxx-xx-9699\t4.91xxxx+xx\tnull\t01-01-1959\nMarroquin\tnnnn Xxxxxxx Xxxxx\tUS\t51\t35beafe31e669c04fd284cc08f20de3309e470861f48dce214a49c0ec8af4135\txxx-xx-8286\t4.53xxxx+xx\tnull\t01-01-1972\nEide\tnnnn Xxxxxx Xxxxxx\tUS\t56\t428281e106e0d916ccdfa74e128373f4e1430d5069d643fe46812fd91bf67b8d\txxx-xx-6762\t4.71xxxx+xx\tnull\t01-01-1980\nMiller\tnnnn Xxxxxxx Xxxx\tUS\t30\t5f714bb3f7bf825e28e665d26a4713a0a39de7ff3e3807ed8e437cb8eb17da17\txxx-xx-2609\t4.71xxxx+xx\tnull\t01-01-1996\nFontenot\tnnnn Xxxxxxx Xxxxx\tUS\t88\tde18c44ed5da5fdf86c15202f9080c0162f1f04fb2928afc0f0cc00aa15ae869\txxx-xx-5867\t5.59xxxx+xx\tnull\t01-01-1949\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230783_2028139911",
      "id": "20160923-075335_1656987170",
      "dateCreated": "2019-08-22 07:50:30.783",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### Prohibition policy to prevent toxic joins\nBelow policy prevents the combination of zipcode, bloodtype, insuranceid columns on ww_customers table\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-prohibition-policy.png)",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.783",
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/text",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eProhibition policy to prevent toxic joins\u003c/h3\u003e\n\u003cp\u003eBelow policy prevents the combination of zipcode, bloodtype, insuranceid columns on ww_customers table\n\u003cbr  /\u003e\u003cimg src\u003d\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-prohibition-policy.png\" alt\u003d\"\" /\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230783_855191812",
      "id": "20180416-134701_1900274445",
      "dateCreated": "2019-08-22 07:50:30.783",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Prohibition policy: Prevent toxic joins (prevent join of Zipcode, Insuranceid, Blood group)",
      "text": "%jdbc(hive)\nselect zipcode, insuranceid, bloodtype from hortoniabank.ww_customers\nlimit 10",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.783",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "editorMode": "ace/mode/sql",
        "colWidth": 12.0,
        "editorHide": false,
        "fontSize": 9.0,
        "title": true,
        "results": [
          {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "keys": [
                {
                  "name": "ww_customers.gender",
                  "index": 0.0,
                  "aggr": "sum"
                }
              ],
              "values": [
                {
                  "name": "ww_customers.title",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "scatter": {
                "xAxis": {
                  "name": "ww_customers.gender",
                  "index": 0.0,
                  "aggr": "sum"
                },
                "yAxis": {
                  "name": "ww_customers.title",
                  "index": 1.0,
                  "aggr": "sum"
                }
              }
            }
          }
        ],
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hortoniabank/ww_customers/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:277)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:263)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:303)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:244)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:682)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:763)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:101)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:502)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:175)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hortoniabank/ww_customers/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:376)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:193)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:278)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:312)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:517)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:504)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:310)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:509)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1497)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1482)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:599)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hortoniabank/ww_customers/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:460)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:874)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:661)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:520)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:358)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1300)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1272)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:191)\n\t... 15 more\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230783_745330275",
      "id": "20160923-075040_806201705",
      "dateCreated": "2019-08-22 07:50:30.783",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Prohibition policy - dropping insuranceid allows query to run",
      "text": "%jdbc(hive)\nselect zipcode, bloodtype from hortoniabank.ww_customers\nlimit 10",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.784",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "zipcode": "string",
                      "bloodtype": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "zipcode\tbloodtype\n65806\tAB-\n99503\tO+\n19403\tO+\n10007\tB+\n19034\tA+\n76550\tB+\n7102\tO+\n43613\tO+\n15238\tA+\n38635\tB+\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230784_-367242678",
      "id": "20171014-031612_1756057609",
      "dateCreated": "2019-08-22 07:50:30.784",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### Leased Data Asset: Lifecycle controlled by Classification based policy \nColumns tagged with EXPIRED_ON are restricted\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-expiredon-policy.png)",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.784",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eLeased Data Asset: Lifecycle controlled by Classification based policy\u003c/h3\u003e\n\u003cp\u003eColumns tagged with EXPIRED_ON are restricted\n\u003cbr  /\u003e\u003cimg src\u003d\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-expiredon-policy.png\" alt\u003d\"\" /\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230784_1939800315",
      "id": "20180416-135459_1798195441",
      "dateCreated": "2019-08-22 07:50:30.784",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Leased Data Asset: Lifecycle controlled by Classification based policy (fed_tax is tagged with EXPIRED_ON which is restricted to analysts)",
      "text": "%jdbc(hive)\nselect fed_tax from finance.tax_2015",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.784",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "title": true,
        "results": [
          {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "keys": [
                {
                  "name": "tax_2015.ssn",
                  "index": 0.0,
                  "aggr": "sum"
                }
              ],
              "values": [
                {
                  "name": "tax_2015.fed_tax",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "scatter": {
                "xAxis": {
                  "name": "tax_2015.ssn",
                  "index": 0.0,
                  "aggr": "sum"
                },
                "yAxis": {
                  "name": "tax_2015.fed_tax",
                  "index": 1.0,
                  "aggr": "sum"
                }
              }
            }
          }
        ],
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:277)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:263)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:303)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:244)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:682)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:763)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:101)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:502)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:175)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:376)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:193)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:278)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:312)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:517)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:504)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:310)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:509)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1497)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1482)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:599)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:460)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:874)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:661)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:520)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:358)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1300)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1272)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:191)\n\t... 15 more\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230784_1314560283",
      "id": "20160925-071354_682186859",
      "dateCreated": "2019-08-22 07:50:30.784",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### Analyst prohibited from accessing personal data through Data Classification based policy\nColums tagged with PII cannot by accessed by analysts\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-PII-policy.png)",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.784",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eAnalyst prohibited from accessing personal data through Data Classification based policy\u003c/h3\u003e\n\u003cp\u003eColums tagged with PII cannot by accessed by analysts\n\u003cbr  /\u003e\u003cimg src\u003d\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-PII-policy.png\" alt\u003d\"\" /\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230784_-1294285414",
      "id": "20180416-135929_1690789582",
      "dateCreated": "2019-08-22 07:50:30.784",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Analyst prohibited from accessing personal data through Data Classification based policy (SSN column is tagged with PII which analysts cannot access)",
      "text": "%jdbc(hive)\nselect ssn from finance.tax_2015",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.785",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:277)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:263)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:303)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:244)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:682)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:763)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:101)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:502)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:175)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:376)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:193)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:278)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:312)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:517)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:504)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:310)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:509)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1497)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1482)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:599)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:460)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:874)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:661)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:520)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:358)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1300)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1272)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:191)\n\t... 15 more\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230785_-605786016",
      "id": "20171130-014507_1288287350",
      "dateCreated": "2019-08-22 07:50:30.785",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Querying for columns other than fed_tax/ssn works",
      "text": "%jdbc(hive)\nselect state_tax from finance.tax_2015",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.785",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "editorMode": "ace/mode/sql",
        "colWidth": 12.0,
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "state_tax": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        }
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "state_tax\n5750\n8765\n10123\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230785_-475950264",
      "id": "20160923-080610_1981371448",
      "dateCreated": "2019-08-22 07:50:30.785",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Data Quality annotation based policy: Don\u0027t waste time on poor quality datasets! (Analysts should not access table tagged with DATA_QUALITY score \u003c 60%)",
      "text": "%jdbc(hive)\nselect * from cost_savings.claim_savings limit 5",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.785",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [cost_savings/claim_savings/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:277)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:263)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:303)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:244)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:682)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:763)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:101)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:502)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:175)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [cost_savings/claim_savings/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:376)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:193)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:278)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:312)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:517)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:504)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:310)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:509)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1497)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1482)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:599)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [cost_savings/claim_savings/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:460)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:874)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:661)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:520)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:358)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1300)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1272)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:191)\n\t... 15 more\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230785_-340425827",
      "id": "20171014-025518_429189642",
      "dateCreated": "2019-08-22 07:50:30.785",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### What about tag based policies on other components?\n\n#### Dynmaic tag based prohibition policies on Hbase, Kafka, HDFS",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.786",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eWhat about tag based policies on other components?\u003c/h3\u003e\n\u003ch4\u003eDynmaic tag based prohibition policies on Hbase, Kafka, HDFS\u003c/h4\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230785_1732024158",
      "id": "20180416-121650_1644147608",
      "dateCreated": "2019-08-22 07:50:30.785",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "HBase table tagged with SENSITIVE tag cannot be accessed by analysts ",
      "text": "%sh\n\nkinit -kt /etc/security/keytabs/joe_analyst.keytab joe_analyst/$(hostname -f)@HWX.COM;\necho \"***Attempting to access T_FOREX as Joe***...\"\necho \"scan \u0027T_FOREX\u0027\" | hbase shell\n\necho \"****Attempting to access T_PRIVATE as Joe***...\"\necho \"scan \u0027T_PRIVATE\u0027\" | hbase shell\n",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.786",
      "config": {
        "editorSetting": {
          "language": "sh",
          "editOnDblClick": false,
          "completionSupport": false
        },
        "colWidth": 4.0,
        "editorMode": "ace/mode/sh",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "***Attempting to access T_FOREX as Joe***...\nHBase Shell; enter \u0027help\u003cRETURN\u003e\u0027 for list of supported commands.\nType \"exit\u003cRETURN\u003e\" to leave the HBase Shell\nVersion 1.1.2.2.6.4.0-91, r2a88e694af7238290a5747f963a4fa0079c55bf9, Thu Jan  4 10:42:39 UTC 2018\n\nscan \u0027T_FOREX\u0027\nROW  COLUMN+CELL\n0 row(s) in 0.2190 seconds\n\n****Attempting to access T_PRIVATE as Joe***...\nHBase Shell; enter \u0027help\u003cRETURN\u003e\u0027 for list of supported commands.\nType \"exit\u003cRETURN\u003e\" to leave the HBase Shell\nVersion 1.1.2.2.6.4.0-91, r2a88e694af7238290a5747f963a4fa0079c55bf9, Thu Jan  4 10:42:39 UTC 2018\n\nscan \u0027T_PRIVATE\u0027\nROW  COLUMN+CELL\n\nERROR: org.apache.hadoop.hbase.security.AccessDeniedException: Insufficient permissions for user joe_analyst/demo.hortonworks.com@HWX.COM\u0027,action: scannerOpen, tableName:T_PRIVATE, family:cf1.\n\nHere is some help for this command:\nScan a table; pass table name and optionally a dictionary of scanner\nspecifications.  Scanner specifications may include one or more of:\nTIMERANGE, FILTER, LIMIT, STARTROW, STOPROW, ROWPREFIXFILTER, TIMESTAMP,\nMAXLENGTH or COLUMNS, CACHE or RAW, VERSIONS\n\nIf no columns are specified, all columns will be scanned.\nTo scan all members of a column family, leave the qualifier empty as in\n\u0027col_family:\u0027.\n\nThe filter can be specified in two ways:\n1. Using a filterString - more information on this is available in the\nFilter Language document attached to the HBASE-4176 JIRA\n2. Using the entire package name of the filter.\n\nSome examples:\n\n  hbase\u003e scan \u0027hbase:meta\u0027\n  hbase\u003e scan \u0027hbase:meta\u0027, {COLUMNS \u003d\u003e \u0027info:regioninfo\u0027}\n  hbase\u003e scan \u0027ns1:t1\u0027, {COLUMNS \u003d\u003e [\u0027c1\u0027, \u0027c2\u0027], LIMIT \u003d\u003e 10, STARTROW \u003d\u003e \u0027xyz\u0027}\n  hbase\u003e scan \u0027t1\u0027, {COLUMNS \u003d\u003e [\u0027c1\u0027, \u0027c2\u0027], LIMIT \u003d\u003e 10, STARTROW \u003d\u003e \u0027xyz\u0027}\n  hbase\u003e scan \u0027t1\u0027, {COLUMNS \u003d\u003e \u0027c1\u0027, TIMERANGE \u003d\u003e [1303668804, 1303668904]}\n  hbase\u003e scan \u0027t1\u0027, {REVERSED \u003d\u003e true}\n  hbase\u003e scan \u0027t1\u0027, {ROWPREFIXFILTER \u003d\u003e \u0027row2\u0027, FILTER \u003d\u003e \"\n    (QualifierFilter (\u003e\u003d, \u0027binary:xyz\u0027)) AND (TimestampsFilter ( 123, 456))\"}\n  hbase\u003e scan \u0027t1\u0027, {FILTER \u003d\u003e\n    org.apache.hadoop.hbase.filter.ColumnPaginationFilter.new(1, 0)}\n  hbase\u003e scan \u0027t1\u0027, {CONSISTENCY \u003d\u003e \u0027TIMELINE\u0027}\nFor setting the Operation Attributes \n  hbase\u003e scan \u0027t1\u0027, { COLUMNS \u003d\u003e [\u0027c1\u0027, \u0027c2\u0027], ATTRIBUTES \u003d\u003e {\u0027mykey\u0027 \u003d\u003e \u0027myvalue\u0027}}\n  hbase\u003e scan \u0027t1\u0027, { COLUMNS \u003d\u003e [\u0027c1\u0027, \u0027c2\u0027], AUTHORIZATIONS \u003d\u003e [\u0027PRIVATE\u0027,\u0027SECRET\u0027]}\nFor experts, there is an additional option -- CACHE_BLOCKS -- which\nswitches block caching for the scanner on (true) or off (false).  By\ndefault it is enabled.  Examples:\n\n  hbase\u003e scan \u0027t1\u0027, {COLUMNS \u003d\u003e [\u0027c1\u0027, \u0027c2\u0027], CACHE_BLOCKS \u003d\u003e false}\n\nAlso for experts, there is an advanced option -- RAW -- which instructs the\nscanner to return all cells (including delete markers and uncollected deleted\ncells). This option cannot be combined with requesting specific COLUMNS.\nDisabled by default.  Example:\n\n  hbase\u003e scan \u0027t1\u0027, {RAW \u003d\u003e true, VERSIONS \u003d\u003e 10}\n\nBesides the default \u0027toStringBinary\u0027 format, \u0027scan\u0027 supports custom formatting\nby column.  A user can define a FORMATTER by adding it to the column name in\nthe scan specification.  The FORMATTER can be stipulated: \n\n 1. either as a org.apache.hadoop.hbase.util.Bytes method name (e.g, toInt, toString)\n 2. or as a custom class followed by method name: e.g. \u0027c(MyFormatterClass).format\u0027.\n\nExample formatting cf:qualifier1 and cf:qualifier2 both as Integers: \n  hbase\u003e scan \u0027t1\u0027, {COLUMNS \u003d\u003e [\u0027cf:qualifier1:toInt\u0027,\n    \u0027cf:qualifier2:c(org.apache.hadoop.hbase.util.Bytes).toInt\u0027] } \n\nNote that you can specify a FORMATTER by column only (cf:qualifier). You can set a\nformatter for all columns (including, all key parts) using the \"FORMATTER\"\nand \"FORMATTER_CLASS\" options. The default \"FORMATTER_CLASS\" is\n\"org.apache.hadoop.hbase.util.Bytes\".\n\n  hbase\u003e scan \u0027t1\u0027, {FORMATTER \u003d\u003e \u0027toString\u0027}\n  hbase\u003e scan \u0027t1\u0027, {FORMATTER_CLASS \u003d\u003e \u0027org.apache.hadoop.hbase.util.Bytes\u0027, FORMATTER \u003d\u003e \u0027toString\u0027}\n\nScan can also be used directly from a table, by first getting a reference to a\ntable, like such:\n\n  hbase\u003e t \u003d get_table \u0027t\u0027\n  hbase\u003e t.scan\n\nNote in the above situation, you can still provide all the filtering, columns,\noptions, etc as described above.\n\n\n\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230786_-1038161396",
      "id": "20171130-023001_1880969110",
      "dateCreated": "2019-08-22 07:50:30.786",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Kafka topics tagged with SENSITIVE tag cannot be accessed by analysts ",
      "text": "%sh\nkinit -kt /etc/security/keytabs/joe_analyst.keytab joe_analyst/$(hostname -f)@HWX.COM\necho \"***Attempting to access FOREX topic as Joe***...\" \n/usr/hdp/current/kafka-broker/bin/kafka-console-consumer.sh --bootstrap-server $(hostname -f):6667 --consumer-property security.protocol\u003dSASL_PLAINTEXT --topic FOREX --from-beginning --max-messages 3\n\necho \"***Attempting to access PRIVATE topic as Joe***...\" \n/usr/hdp/current/kafka-broker/bin/kafka-console-consumer.sh --bootstrap-server  $(hostname -f):6667 --consumer-property security.protocol\u003dSASL_PLAINTEXT --topic PRIVATE --from-beginning --max-messages 3\n",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.786",
      "config": {
        "editorSetting": {
          "language": "sh",
          "editOnDblClick": false,
          "completionSupport": false
        },
        "colWidth": 4.0,
        "editorMode": "ace/mode/sh",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "***Attempting to access FOREX topic as Joe***...\nUTC time,EUR/USD\n2018-03-26T09:00:00Z,1.231\n2018-03-26T10:00:00Z,1.232\n[2019-01-25 22:34:30,741] WARN [Principal\u003dnull]: TGT renewal thread has been interrupted and will exit. (org.apache.kafka.common.security.kerberos.KerberosLogin)\nProcessed a total of 3 messages\n***Attempting to access PRIVATE topic as Joe***...\n[2019-01-25 22:34:32,407] WARN [Consumer clientId\u003dconsumer-1, groupId\u003dconsole-consumer-96929] Error while fetching metadata with correlation id 2 : {PRIVATE\u003dTOPIC_AUTHORIZATION_FAILED} (org.apache.kafka.clients.NetworkClient)\n[2019-01-25 22:34:32,409] ERROR Unknown error when running consumer:  (kafka.tools.ConsoleConsumer$)\norg.apache.kafka.common.errors.TopicAuthorizationException: Not authorized to access topics: [PRIVATE]\n"
          },
          {
            "type": "TEXT",
            "data": "ExitValue: 1"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230786_165349567",
      "id": "20180328-060527_475527693",
      "dateCreated": "2019-08-22 07:50:30.786",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "HDFS dir/file tagged with SENSITIVE tag cannot be accessed by analysts ",
      "text": "%sh\nkinit -kt /etc/security/keytabs/joe_analyst.keytab joe_analyst/$(hostname -f)@HWX.COM\nhdfs dfs -cat /sensitive/private.csv",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.786",
      "config": {
        "editorSetting": {
          "language": "sh",
          "editOnDblClick": false,
          "completionSupport": false
        },
        "colWidth": 4.0,
        "editorMode": "ace/mode/sh",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "cat: Permission denied: user\u003djoe_analyst, access\u003dEXECUTE, inode\u003d\"/sensitive/private.csv\"\n"
          },
          {
            "type": "TEXT",
            "data": "ExitValue: 1"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230786_1197469641",
      "id": "20180620-011510_115380564",
      "dateCreated": "2019-08-22 07:50:30.786",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "HDP 3.0 Decrypt UDF: US employee sees decrypted versions of email and phone number",
      "text": "%jdbc(hive)\nselect * from  hr.employees_encrypted;",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.787",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "employees_encrypted.id": "string",
                      "employees_encrypted.name": "string",
                      "employees_encrypted.age": "string",
                      "employees_encrypted.phone": "string",
                      "employees_encrypted.email": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "employees_encrypted.id\temployees_encrypted.name\temployees_encrypted.age\temployees_encrypted.phone\temployees_encrypted.email\nnull\tName\tnull\tPhone\tEmail\n677509\tDonald Walker\t42\t303-572-8492\tlois.walker@hotmail.com\n940761\tRaymond Robinson\t41\t225-945-4954\tbrenda.robinson@gmail.com\n428945\tScott Robinson\t39\t219-904-2161\tjoe.robinson@gmail.com\n408351\tJason Evans\t20\t215-793-6791\tdiane.evans@yahoo.com\n193819\tGregory Russell\t78\t262-404-2252\tbenjamin.russell@charter.net\n499687\tRalph Bailey\t50\t319-812-6957\tpatrick.bailey@aol.com\n539712\tScott Baker\t22\t229-336-5117\tnancy.baker@bp.com\n380086\tEugene Murphy\t43\t216-336-0009\tcarol.murphy@gmail.com\n477616\tFred Young\t77\t210-819-9765\tfrances.young@gmail.com\n162402\tJonathan Peterson\t73\t479-783-5656\tdiana.peterson@hotmail.co.uk\n231469\tTerry Flores\t41\t316-280-2864\tralph.flores@yahoo.com\n153989\tSamuel Alexander\t60\t702-603-3769\tjack.alexander@gmail.com\n386158\tPhilip King\t42\t216-605-3731\tmelissa.king@comcast.net\n301576\tRonald Watson\t56\t701-231-9370\twayne.watson@gmail.com\n441771\tRichard Scott\t28\t215-288-9345\tcheryl.scott@gmail.com\n528509\tAlan Diaz\t20\t252-531-7641\tpaula.diaz@gmail.com\n912990\tTodd Stewart\t46\t217-279-9342\tjoshua.stewart@yahoo.ca\n214352\tJohn Lee\t40\t319-553-8919\ttheresa.lee@gmail.com\n890290\tLawrence Scott\t46\t423-939-1010\tjulia.scott@apple.com\n622406\tRyan Lewis\t52\t314-679-3697\tthomas.lewis@gmail.com\n979607\tShawn Edwards\t19\t225-283-4295\tcarol.edwards@msn.com\n969580\tJose Turner\t77\t236-972-7624\tmatthew.turner@gmail.com\n426038\tCharles Stewart\t49\t216-637-6800\tjoan.stewart@yahoo.com\n388642\tRonald Rogers\t22\t423-231-6507\truby.rogers@gmail.com\n560455\tJimmy Hayes\t61\t239-882-8784\tcarolyn.hayes@hotmail.co.uk\n477253\tJimmy Russell\t19\t605-635-1306\tanne.russell@ibm.com\n263480\tLouis Cooper\t76\t701-510-8162\tdaniel.cooper@yahoo.com\n683826\tAntonio Roberts\t23\t206-497-3141\troger.roberts@gmail.com\n474599\tRalph Walker\t31\t423-668-5506\tmaria.walker@microsoft.com\n335732\tPhillip Butler\t34\t480-814-8284\tbrenda.butler@gmail.com\n329752\tGary Brown\t19\t239-812-9041\tlillian.brown@aol.com\n893212\tJames Howard\t37\t803-613-3168\tamy.howard@aol.com\n621833\tJose Edwards\t84\t503-256-9654\tgregory.edwards@outlook.com\n456747\tBenjamin Griffin\t59\t219-506-9378\troy.griffin@yahoo.com\n278556\tPeter Mitchell\t71\t205-621-5884\trichard.mitchell@verizon.net\n333476\tRobert Wilson\t48\t423-937-8660\tmary.wilson@sbcglobal.net\n218791\tMichael Price\t27\t219-287-8926\taaron.price@bp.com\n134841\tAdam Brown\t46\t212-434-7910\tdonna.brown@aol.com\n726264\tGerald Collins\t27\t479-740-7633\tcarl.collins@yahoo.com\n766610\tEdward Jenkins\t43\t262-455-4187\tjoyce.jenkins@aol.com\n923947\tJoshua Bryant\t76\t319-827-3516\tmary.bryant@verizon.net\n227922\tRoy Hughes\t63\t225-544-9700\tamanda.hughes@rediffmail.com\n265813\tPhilip Campbell\t42\t316-499-5737\tjack.campbell@gmail.com\n247137\tBobby Rivera\t73\t423-277-6819\talan.rivera@apple.com\n407061\tScott Jackson\t49\t603-568-6118\telizabeth.jackson@aol.com\n226714\tBruce Davis\t57\t219-610-3067\tnancy.davis@ibm.com\n702813\tRyan Martinez\t44\t479-951-4138\ternest.martinez@gmail.com\n524896\tRalph Walker\t37\t316-736-6126\tjudy.hernandez@gmail.com\n363065\tPhillip Butler\t19\t212-825-1930\tnancy.jones@gmail.com\n227924\tGary Brown\t69\t307-329-8832\tpamela.wright@aol.com\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230787_-1603893755",
      "id": "20180720-081532_1607285102",
      "dateCreated": "2019-08-22 07:50:30.787",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "HDP 3.0 Information Schema: Analyst does not have any privileges on UK_EMPLOYEES table (etl_user does)",
      "text": "%jdbc(hive)\nselect * from information_schema.table_privileges where table_name\u003d\u0027uk_employees\u0027;",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.787",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "table_privileges.grantor": "string",
                      "table_privileges.grantee": "string",
                      "table_privileges.table_catalog": "string",
                      "table_privileges.table_schema": "string",
                      "table_privileges.table_name": "string",
                      "table_privileges.privilege_type": "string",
                      "table_privileges.is_grantable": "string",
                      "table_privileges.with_hierarchy": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "table_privileges.grantor\ttable_privileges.grantee\ttable_privileges.table_catalog\ttable_privileges.table_schema\ttable_privileges.table_name\ttable_privileges.privilege_type\ttable_privileges.is_grantable\ttable_privileges.with_hierarchy\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230787_-759532561",
      "id": "20180719-222102_575617788",
      "dateCreated": "2019-08-22 07:50:30.787",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%jdbc(hive)\nselect * from hr.uk_employees limit 5",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.787",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:300)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:286)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:335)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:199)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:260)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:247)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:541)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:527)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:78)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.access$000(HiveSessionProxy.java:36)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy$1.run(HiveSessionProxy.java:63)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1688)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:59)\n\tat com.sun.proxy.$Proxy72.executeStatementAsync(Unknown Source)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:312)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:562)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:647)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:483)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:1306)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:1070)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:697)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1830)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1777)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1772)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:197)\n\t... 27 more\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230787_1839566081",
      "id": "20180719-230647_1943203914",
      "dateCreated": "2019-08-22 07:50:30.787",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "HDP 3.0 Schedulable policy: validity period of Ranger policy determines whether table can be accessed",
      "text": "\n%jdbc(hive)\nselect * from hr.uk_employees limit 5",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.788",
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sql",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "ERROR",
        "msg": [
          {
            "type": "TEXT",
            "data": "org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:300)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:286)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:335)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:199)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:260)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:247)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:541)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:527)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:78)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.access$000(HiveSessionProxy.java:36)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy$1.run(HiveSessionProxy.java:63)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1688)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:59)\n\tat com.sun.proxy.$Proxy72.executeStatementAsync(Unknown Source)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:312)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:562)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:647)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:483)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:1306)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:1070)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:697)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1830)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1777)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1772)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:197)\n\t... 27 more\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230788_1670609626",
      "id": "20180720-081842_831763351",
      "dateCreated": "2019-08-22 07:50:30.788",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n### Objective:Implement appropriate security controls to monitor access to data across the enterprise\n### Purpose: \n####  - Track user activity for personal/sensitive data to support both forensic auditing\n####  - Monitor and correlate data access via audits for breach forensics\n### Solution: \n####  - Ranger audits across Hadoop components (Hive, Hbase, Kafka etc) captured in Solr and HDFS\n\nLog into Ranger and navigate to Audit \u003e Access. You will see a screen that looks like below:",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.788",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eObjective:Implement appropriate security controls to monitor access to data across the enterprise\u003c/h3\u003e\n\u003ch3\u003ePurpose:\u003c/h3\u003e\n\u003ch4\u003e- Track user activity for personal/sensitive data to support both forensic auditing\u003c/h4\u003e\n\u003ch4\u003e- Monitor and correlate data access via audits for breach forensics\u003c/h4\u003e\n\u003ch3\u003eSolution:\u003c/h3\u003e\n\u003ch4\u003e- Ranger audits across Hadoop components (Hive, Hbase, Kafka etc) captured in Solr and HDFS\u003c/h4\u003e\n\u003cp\u003eLog into Ranger and navigate to Audit \u003e Access. You will see a screen that looks like below:\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230788_1844018699",
      "id": "20180416-130050_585569637",
      "dateCreated": "2019-08-22 07:50:30.788",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-joe-audits.png)",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.788",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cp\u003e\u003cimg src\u003d\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/screenshot-joe-audits.png\" alt\u003d\"\" /\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230788_-988569112",
      "id": "20180405-064354_180188806",
      "dateCreated": "2019-08-22 07:50:30.788",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Appendix - Populate kafka topics as log_monitor user",
      "text": "%sh\ncat \u003c\u003c EOF \u003e /tmp/forex.csv\nUTC time,EUR/USD\n2018-03-26T09:00:00Z,1.231\n2018-03-26T10:00:00Z,1.232\n2018-03-26T11:00:00Z,1.233\n2018-03-26T12:00:00Z,1.231\n2018-03-26T13:00:00Z,1.234\n2018-03-26T14:00:00Z,1.230\n2018-03-26T15:00:00Z,1.232\nEOF\n\n\ncat \u003c\u003c EOF \u003e /tmp/private.csv\n123-45-67890\n321-54-09876\n800-60-32982\n333-22-09873\n222-98-21816\n111-44-91021\n999-11-56101\n098-45-10927\nEOF\n\n\nkinit -kt /etc/security/keytabs/log_monitor.keytab log_monitor/$(hostname -f)@HWX.COM\n\n/usr/hdp/current/kafka-broker/bin/kafka-console-producer.sh --producer-property security.protocol\u003dSASL_PLAINTEXT --broker-list $(hostname -f):6667 --topic PRIVATE  \u003c /tmp/private.csv\n/usr/hdp/current/kafka-broker/bin/kafka-console-producer.sh --producer-property security.protocol\u003dSASL_PLAINTEXT --broker-list $(hostname -f):6667 --topic FOREX  \u003c /tmp/forex.csv\n\n\n",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.789",
      "config": {
        "tableHide": false,
        "editorSetting": {
          "language": "sh",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/sh",
        "fontSize": 9.0,
        "editorHide": false,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e[2019-01-25 22:34:06,829] WARN [Principal\u003dnull]: TGT renewal thread has been interrupted and will exit. (org.apache.kafka.common.security.kerberos.KerberosLogin)\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e[2019-01-25 22:34:08,598] WARN [Principal\u003dnull]: TGT renewal thread has been interrupted and will exit. (org.apache.kafka.common.security.kerberos.KerberosLogin)\n"
          }
        ]
      },
      "apps": [],
      "jobName": "paragraph_1566460230789_515260246",
      "id": "20190125-223154_28533009",
      "dateCreated": "2019-08-22 07:50:30.789",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%sh\n",
      "user": "csso_ssulav",
      "dateUpdated": "2019-08-22 07:50:30.789",
      "config": {
        "editorSetting": {
          "language": "scala",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/scala",
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "apps": [],
      "jobName": "paragraph_1566460230789_193230632",
      "id": "20190125-223403_1519640815",
      "dateCreated": "2019-08-22 07:50:30.789",
      "status": "READY",
      "errorMessage": "",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "Demos / Security / HortoniaBank / HortoniaBank - Joe Analyst",
  "id": "2EKXBF56D",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {
    "md:shared_process": []
  },
  "config": {
    "isZeppelinNotebookCronEnable": false
  },
  "info": {}
}